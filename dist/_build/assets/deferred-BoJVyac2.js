import{d as l,j as r,r as o,b as f}from"./client-ok51kevS.js";const s=Symbol.for("TSR_DEFERRED_PROMISE");function h(n,e){const t=n;return t[s]||(t[s]={status:"pending"},t.then(i=>{t[s].status="success",t[s].data=i}).catch(i=>{t[s].status="error",t[s].error={data:l(i),__isServerError:!0}})),t}function m({promise:n}){const e=h(n);if(e[s].status==="pending")throw e;if(e[s].status==="error")throw e[s].error;return[e[s].data,e]}function c(n){const e=r.jsx(x,{...n});return n.fallback?r.jsx(o.Suspense,{fallback:n.fallback,children:e}):e}function x(n){const[e]=m(n);return n.children(e)}const p=function(){const[e,t]=o.useState(0),{deferredStuff:i,deferredPerson:u,person:d}=f.useLoaderData();return r.jsxs("div",{className:"p-2",children:[r.jsxs("div",{"data-testid":"regular-person",children:[d.name," - ",d.randomNumber]}),r.jsx(o.Suspense,{fallback:r.jsx("div",{children:"Loading person..."}),children:r.jsx(c,{promise:u,children:a=>r.jsxs("div",{"data-testid":"deferred-person",children:[a.name," - ",a.randomNumber]})})}),r.jsx(o.Suspense,{fallback:r.jsx("div",{children:"Loading stuff..."}),children:r.jsx(c,{promise:i,children:a=>r.jsx("h3",{"data-testid":"deferred-stuff",children:a})})}),r.jsxs("div",{children:["Count: ",e]}),r.jsx("div",{children:r.jsx("button",{onClick:()=>t(e+1),children:"Increment"})})]})};export{p as component};
